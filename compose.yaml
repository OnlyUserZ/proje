services:
	
	postgres:
		image: postgres:17.6
		container_name: postgresql
		restart: unless-stopped
		ports:
			- "1562:5432"
		environment:
			POSTGRES_DB: Sorun
			POSTGRES_USER: postgres
			POSTGRES_PASSWORD: 156215623
		volumes:
			- postgres_data:/var/lib/postgresql/data
		networks:
			- "drandt"
			
			
	redis:
		image: redis:7
		container_name: redis
		restart: unless-stopped
		ports:
			- "6379:6379"
		networks:
			- "drandt"
			
			
	app:
		build: . 
		container_name: my_app
		restart: unless-stopped
		depends_on:
			- redis
			- postgres
		ports:
			- "8080:8080"
		environment:
			SPRING_DATASOURCE_URL: jdbc:postgresql://postgres:5432/Sorun
			SPRING_DATASOURCE_USERNAME: postgres
			SPRING_DATASOURCE_PASSWORD: 156215623
			SPRING_REDIS_HOST: redis
			SPRING_REDIS_PORT: 6379	
		networks:
			- "drandt"
			
volumes:
	postgres_data:
		
networks:
	drandt:						
					 		
									
																		
								